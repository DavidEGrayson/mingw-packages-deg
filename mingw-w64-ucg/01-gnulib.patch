diff -ur ucg-0.2.2-orig/configure.ac ucg-0.2.2/configure.ac
--- ucg-0.2.2-orig/configure.ac	2016-04-16 21:42:36.299129100 -0700
+++ ucg-0.2.2/configure.ac	2016-04-16 21:46:20.290455400 -0700
@@ -72,6 +72,7 @@
 
 ## Checks for the programs needed to do a build.
 AC_PROG_CC
+gl_EARLY
 # This is required instead of AC_PROG_CC_C_O by automake's "subdir-objects" option.
 AM_PROG_CC_C_O
 AC_PROG_CXXCPP # Needed for the AC_PREPROC_IFELSE() check of pcre version below.
@@ -83,6 +84,7 @@
 m4_ifdef([AM_PROG_AR], [AM_PROG_AR])
 AC_PROG_SED
 
+gl_INIT
 
 ## Checks for maintainer tools.
 
@@ -200,8 +202,7 @@
 # Autoconf-supported test directory.
 AC_CONFIG_TESTDIR([tests])
 # The Autotest files to be generated by configure.
-AC_CONFIG_FILES([tests/Makefile tests/atlocal])
-
+AC_CONFIG_FILES([tests/Makefile tests/atlocal lib/Makefile])
 
 ###
 ### Create the Makefiles for the program.
diff -ur ucg-0.2.2-orig/Makefile.am ucg-0.2.2/Makefile.am
--- ucg-0.2.2-orig/Makefile.am	2016-04-16 21:42:36.343775400 -0700
+++ ucg-0.2.2/Makefile.am	2016-04-16 21:59:48.366986100 -0700
@@ -24,7 +24,7 @@
 # The subdirectories containing the source code, docs, and tests.
 # Note: The code in src depends on the libraries in third_party, so make sure the latter is always listed before the former.
 # Note that we can't list these other libraries in e.g. *_DEPENDENCIES because that replaces all Automake-generated dependencies.
-SUBDIRS = third_party src . tests
+SUBDIRS = third_party src lib . tests
 
 # Make sure README.rd and other docs get distributed and installed correctly.
 dist_doc_DATA = README.md NEWS.md COPYING AUTHORS
@@ -67,12 +67,12 @@
 		echo "Removing the file \"$(top_srcdir)/.tarball-version\" will allow it to build."; \
 		exit 1; \
 	fi;
-	
+
 dist-hook:
 	echo -n "$$(cd $(top_srcdir) && git describe --long --dirty | tr -d '\r\n')-tarball"  > "$(distdir)/.tarball-version"
 
-ucg_CPPFLAGS = -I $(top_srcdir)/src \
-	$(AM_CPPFLAGS) 
+ucg_CPPFLAGS = -I $(top_srcdir)/src -I $(top_srcdir)/lib \
+	$(AM_CPPFLAGS)
 ucg_CFLAGS = $(AM_CFLAGS)
 ucg_CXXFLAGS = $(AM_CXXFLAGS)
 ucg_LDFLAGS = $(AM_LDFLAGS)
diff -ur ucg-0.2.2-orig/src/Makefile.am ucg-0.2.2/src/Makefile.am
--- ucg-0.2.2-orig/src/Makefile.am	2016-04-16 21:42:36.269766900 -0700
+++ ucg-0.2.2/src/Makefile.am	2016-04-16 21:59:52.870392400 -0700
@@ -30,6 +30,6 @@
 	sync_queue_impl_selector.h \
 	TypeManager.cpp TypeManager.h
 
-libsrc_a_CPPFLAGS = $(AM_CPPFLAGS)
+libsrc_a_CPPFLAGS = $(AM_CPPFLAGS) -I $(top_srcdir)/lib
 libsrc_a_CFLAGS = $(AM_CFLAGS)
 libsrc_a_CXXFLAGS = $(AM_CXXFLAGS)
--- ucg-0.2.2-orig/Makefile.am	2016-04-16 22:08:29.036557000 -0700
+++ ucg-0.2.2/Makefile.am	2016-04-16 23:30:02.562985000 -0700
@@ -76,5 +76,5 @@
 ucg_CFLAGS = $(AM_CFLAGS)
 ucg_CXXFLAGS = $(AM_CXXFLAGS)
 ucg_LDFLAGS = $(AM_LDFLAGS)
-ucg_LDADD = ./src/libsrc.a
+ucg_LDADD = ./src/libsrc.a ./lib/libgnu.a
 
